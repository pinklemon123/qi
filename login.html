<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>登录 · qi</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#0b1220;color:#e2e8f0}
    .card{width:360px;padding:24px;border-radius:16px;background:rgba(255,255,255,0.06);
      backdrop-filter: blur(10px);box-shadow:0 10px 40px rgba(0,0,0,0.3)}
    input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #334155;background:#0f172a;color:#e2e8f0;margin:8px 0}
    button{width:100%;padding:12px 14px;border:none;border-radius:12px;margin-top:8px;cursor:pointer}
    .primary{background:#22c55e;color:#0b1220;font-weight:700}
    .ghost{background:#1f2937;color:#e2e8f0}
    .row{display:flex;gap:12px}
    .msg{min-height:20px;margin-top:10px;color:#94a3b8}
    .hint{text-align:center;font-size:14px;color:#94a3b8;margin-top:8px}
  </style>
</head>
<body>
  <div class="card">
    <h2>帐号登录</h2>
    <input id="username" placeholder="用户名（字母/数字/下划线，>=3）" />
    <input id="password" placeholder="密码（>=6）" type="password" />
    <div class="row">
      <button class="primary" id="btnSignup">注册并登录</button>
      <button class="ghost" id="btnLogin">登录</button>
    </div>
    <div class="hint">首次使用请点“注册并登录”</div>
    <div class="msg" id="msg"></div>
  </div>
  <script src="/auth.js"></script>
  <script>
    const $ = (id) => document.getElementById(id);
    $("btnSignup").onclick = async () => {
      try {
        await Auth.signup({ username: $("username").value, password: $("password").value });
        Auth.redirectAfterLogin();
      } catch (e) { $("msg").innerText = e.message; }
    };
    $("btnLogin").onclick = async () => {
      try {
        await Auth.login({ username: $("username").value, password: $("password").value });
        Auth.redirectAfterLogin();
      } catch (e) { $("msg").innerText = e.message; }
    };
  </script>
</body>
</html>
