/* =========================
   全局变量（可按需微调）
   ========================= */
:root{
  /* 棋盘整体尺寸：适中 */
  --board-max-width: min(95vmin, 960px);

  /* 与当前 board.png 对齐的偏移（百分比） */
  --board-off-x: 3.5%;
  --board-off-top: 6.0%;

  /* 棋子在单格中占比（0.74~0.80 都OK） */
  --piece-scale: 0.76;

  /* 提示/高亮 */
  --hint-dot: 18px;
  --ring-thickness: 3px;

  /* 颜色 */
  --red: #d34b41;
  --black: #3a3a3a;
  --hint: rgba(0, 152, 255, .22);
  --ring: rgba(0, 152, 255, .85);
  --last-move: rgba(255, 206, 0, .18);
}

/* =========================
   基础排版
   ========================= */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:14px/1.55 system-ui, -apple-system, "Segoe UI", Roboto, "PingFang SC",
       "Microsoft Yahei", "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  color:#222;
  background:#faf7f2;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:24px 16px 40px;
}
.app{ width:100%; max-width:1000px }  /* 外层不要太宽 */
h1{margin:.2em 0 .6em}

/* =========================
   棋盘容器
   ========================= */
#board{
  position:relative;
  width:var(--board-max-width);
  aspect-ratio: 9 / 10;                         /* 中国象棋比例 */
  background:url("./board.png") center / 100% 100% no-repeat;
  margin:12px auto 16px;
  overflow:visible;
  -webkit-tap-highlight-color: transparent;

  /* 提供给 JS 读取用的偏移（来源于 :root） */
  --off-x: var(--board-off-x);
  --off-top: var(--board-off-top);
}

/* =========================
   网格交叉点（由 JS 生成 9x10 个）
   ========================= */
.cell{
  position:absolute;
  width:1px; height:1px;                 /* 交叉点本体很小 */
  left:0; top:0;
  transform:translate(-50%,-50%);        /* 以交叉点为中心 */
  cursor:pointer;
}
/* 扩大可点区域（不影响布局） */
.cell::before{
  content:"";
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:max(36px, 9%); height:max(36px, 9%);
  border-radius:50%;
  background:transparent;
}

/* =========================
   圆形相框棋子（图片版）
   ========================= */
.piece-img{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%, -50%);
  width:calc(var(--piece-scale) * 100%);
  aspect-ratio:1/1;
  object-fit:contain;

  /* 圆形相框效果 */
  border-radius:50%;
  background:#fffdf7;                        /* 相框底色 */
  border:2px solid #c9b9a5;                  /* 外圈描边 */
  box-shadow:
    0 1px 0 rgba(0,0,0,.06),
    inset 0 0 0 1px rgba(255,255,255,.65);   /* 内高光 */
  padding:6%;                                /* 留出相框边 */

  pointer-events:none; user-select:none;
  image-rendering:auto;
}

/* =========================
   提示 / 选中 / 上一步
   ========================= */
.cell .hint{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:var(--hint-dot); height:var(--hint-dot);
  border-radius:50%;
  background:var(--hint);
  box-shadow:0 0 0 2px rgba(0,0,0,.14) inset;
}
.cell .capture{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:calc(100% * var(--piece-scale));
  aspect-ratio:1/1;
  border:var(--ring-thickness) solid var(--ring);
  border-radius:50%;
}
.selected .select-ring{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:calc(100% * var(--piece-scale) + 10px);
  aspect-ratio:1/1;
  border:var(--ring-thickness) solid var(--ring);
  border-radius:50%;
  box-shadow:0 0 10px rgba(0,152,255,.25);
}
.cell.last{ background:var(--last-move); border-radius:12%; }

/* =========================
   工具栏
   ========================= */
.toolbar{
  display:flex; flex-wrap:wrap; gap:10px 12px;
  align-items:center; justify-content:center;
  margin: 6px 0 10px;
}
.toolbar label{ display:flex; align-items:center; gap:6px; }
button{
  appearance:none; border:none; border-radius:12px;
  padding:8px 14px; background:#f0eee9; color:#333;
  cursor:pointer; font-weight:600;
  box-shadow:0 1px 0 rgba(0,0,0,.04);
}
button:hover{ background:#e8e5de }
button:active{ transform:translateY(1px) }
button.primary{ background:#2b7cff; color:#fff }
button.danger{ background:#e74c3c; color:#fff }

/* =========================
   彻底禁用文字棋子/坐标字母（防止旧代码残留）
   ========================= */
.piece, .row-label, .col-label { display:none !important; }

/* =========================
   响应式
   ========================= */
@media (min-width:860px){
  body{ padding-top:32px }
}
